<script>

    /*
> **DESAFIO:** Crie um sistema funcional completo de gerenciamento de tarefas com validação rigorosa e categorização inteligente.

## Problema 6: Sistema de Reservas de Restaurante

Contexto: Um restaurante precisa gerenciar suas reservas. O sistema deve permitir reservar mesas, cancelar reservas, visualizar mesas disponíveis e gerar relatórios de ocupação.

### Requisitos:
1. Função para validar entrada: Valide nome (não vazio), horário (6 a 22h), número de pessoas (1 a 20) usando while.
2. Função para fazer reserva: Adicione a reserva ao array se houver mesa disponível.
3. Função para cancelar reserva: Remova uma reserva pelo nome.
4. Função para listar mesas disponíveis: Use for e if...else para identificar:
    - Mesas vazias (totalmente disponíveis)
    - Mesas meio-ocupadas
    - Mesas cheias
5. Menu interativo com while e if...else aninhado.

Dados Iniciais:

```javascript
let reservas = ["João - 19:00", "Maria - 20:00"];
let horarios = [19, 20];
let pessoasReservadas = [4, 6];
let mesasDisponiveis = 10;
```

*/
    //Entrada 
    let reservas = ["João - 19:00", "Maria - 20:00"];
    let horarios = [19, 20];
    let pessoasReservadas = [4, 6];
    let mesasDisponiveis = 10;

    // Processamento
    function fazerReserva() {
        if (reservas.length >= mesasDisponiveis) {
            alert("Todas as mesas estão ocupadas! Não é possível reservar.");
            return;
        }
        function validarNome(params) {
            {
                let nome = prompt("Digite o nome da reserva:");
                while (nome === "" || !isNaN(nome)) {
                    nome = prompt("Nome inválido! Digite novamente:");
                }
                return nome;
            }
        }
        let nome = validarNome();
        function validarHorario() {
            {
                let hora = parseInt(prompt("Digite o horário (6h a 22h):"));
                while (isNaN(hora) || hora < 6 || hora > 22) {
                    hora = parseInt(prompt("Horário inválido! Digite entre 6h e 22h:"));
                }
                return hora;
            }
        }
        let hora = validarHorario();

        function validarPessoas() {
            let pessoas = parseInt(prompt("Quantidade de pessoas (1 a 20):"));
            while (isNaN(pessoas) || pessoas < 1 || pessoas > 20) {
                pessoas = parseInt(prompt("Número inválido! Digite entre 1 e 20 pessoas:"));
            }
            return pessoas;
        }
        let pessoas = validarPessoas();

        reservas.push(`${nome} - ${hora}:00`);
        horarios.push(hora);
        pessoasReservadas.push(pessoas);

        alert(`Reserva realizada com sucesso para ${nome} às ${hora}:00!`);
    }
    function cancelarReserva() {
        let nome = prompt("Digite o nome da reserva que deseja cancelar:");
        let indice = -1;

        for (let i = 0; i < reservas.length; i++) {
            if (reservas[i].includes(nome)) {
                indice = i;
            }
        }

        if (indice >= 0) {
            reservas.splice(indice, 1);
            horarios.splice(indice, 1);
            pessoasReservadas.splice(indice, 1);
            alert(`Reserva de "${nome}" cancelada com sucesso!`);
        } else {
            alert("Reserva não encontrada!");
        }
    }
    function listarMesas() {
        let relatorio = `OCUPAÇÃO DAS MESAS \n`;
    let ocupadas = reservas.length;
    let vagas = mesasDisponiveis - ocupadas;

    if (ocupadas === 0) {
        relatorio += `Todas as mesas estão totalmente vazias.\n`;
    } 
    else if (ocupadas === mesasDisponiveis) {
        relatorio += `Todas as mesas estão cheias.\n`;
    } 
    else {
        relatorio += `Mesas ocupadas: ${ocupadas}\n`;
        relatorio += `Mesas disponíveis: ${vagas}\n\n`;
        relatorio += `Reservas atuais:\n`;
        for (let i = 0; i < reservas.length; i++) {
            relatorio += `- ${reservas[i]} | Pessoas: ${pessoasReservadas[i]}\n`;
        }
    }

    alert(relatorio);
}



    // Saida
    let opcao = 1;

    while (opcao !== 0) {
        opcao = parseInt(prompt(`SISTEMA DE RESERVAS \n\n 1. Fazer Reserva\n 2. Cancelar Reserva\n 3. Visualizar Ocupação de Mesas\n 0. Sair\n\n Escolha uma opção:`));

        if (opcao === 1) {
            fazerReserva();
        }
        else if (opcao === 2) {
            cancelarReserva();
        }
        else if (opcao === 3) {
            listarMesas();
        }
        else if (opcao === 0) {
            alert("Encerrando sistema...");
        }
        else {
            alert("Opção inválida!");
        }
    }
</script>